ehbfunctionoverview::CPT_T2t[Component Overview for CPT_T2t]

ehbmodelref::Torque2Throttle/Main[Torque2Throttle/Main]

== Momentenumrechnung

Das Modul Momentenumrechnung (Torque2Throttle) berechnet aus dem aktuellen Zustand des Motors und dem benötigten Moment die Drosselklappen- und Wastegateposition. Dazu wird aus der Drehzahl Epm_rpmEngSpd und gewünschten Moment Tqs_tqReq der Soll- Saugrohrdruck T2t_pManiReqMin dient über T2t_rpmEngSpdtqReq2pManiReqBase_MAP festge- legt und mit den Kehrwerten des Zündwinkelwirkungsgrad T2t_facSparkEff und des Lambdawirkungsgrad T2t_facLambdaEff multipliziert, wodurch Verluste ausgeglichen wer- den.Die untere Begrenzung des Saugrohrdruck-Basiswerts durch T2t_pManiReqMin dient der Sicherheit. Gründe dafür sind:

* Der Saugrohrdruck darf nicht zu tief fallen, damit keine Dichtungen eingesaugt werden
* Der Arbeitsbereich des Sensors hat eine Untergrenze von 20hPa
* Die Regler für Drosselklappen- und Wastegateposition dürfen keinen Sollwert vorge- gebenbekommen, der nicht erreichbar ist.

ehbmodelref::Torque2Throttle/Main/ThrottleValveControl[Torque2Throttle/Main/ThrottleValveControl]

Die Regelungen der Drosselklappe und des Wastegates erfolgen jeweils mit PI-Reglern. Zwischen beiden besteht eine große Abhängigkeit. Je weiter dasWastegate geöffnet ist, desto höher ist der Ladedruck und damit die Druckdifferenz vor und nach Drosselklappe, was zu einem anderen Luftmassenstrom führt. Umgekehrt kann bei niedrigen Saugrohrdrücken, also wenig Last, kein Ladedruck aufgebaut werden.

ehbmodelref::Torque2Throttle/Main/WastegateControl[Torque2Throttle/Main/WastegateControl]

Da am Motor kein Ladedrucksensor verbaut ist, kann dieser nicht gemessen werden. Um die Steuerung einfach zu halten wird daher der Ladedruck unabhängig von der Drosselklappe geregelt. Bei einem Saugrohrdruck unter Umgebungsdruck wird eine reine Saugmotorsteuerung angenommen, d. h., ein Ladedruck von 0bar und bei Drücken über Umgebungsdruck eine reine Ladedruckregelung durchgeführt. Es wird angenommen, dass bei weit geöffneter Drosselklappe, was bei hohen Saugrohrdruckanforderungen der Fall ist, der Ladedruck gleich dem Saugrohrdruck ist. Erreicht wird das durch entsprechendes Parametrieren der Vorsteuerungen der Drosselklappen- und Wastegatepositionsvorgabe ( T2t_facThrValveReq und T2t_facWasteGateRate ).

Die Grundparametrierung der Kennlinien T2t_facSparkEff und des Lambdawirkungsgrad T2t_facLambdaEff und des Kennfelds T2t_rpmEngSpdtqReq2pManiReqBase_MAP sind eins zu eins aus einem vorhandenen BMW-8-Zylinder-Modell übernommen und müssen gegebenenfalls noch an den Smart-Motor angepasst werden.

Die Reglerauslegung für den Drosselklappensollwert erfolgt nach dem Verfahren der experimentellen Reglereinstellung nach Ziegler-Nichols. Der I-Anteil des Reglers kann durch setzen der Nachstellzeit auf einen großen Wert (z. B. T2t_tiTnThrValveReqCorr = 106) quasi ausgeschaltet werden.

Zur Vereinfachung wird hierbei keine drehzahlabhängige Verstärkung verwendet, sondern der schlechteste Fall, der sich bei hohen Drehzahlen befindet. Die kritische Verstärkung liegt bei rund KPkrit = 3,5×10-5, woraus sich eine Reglerverstärkung Tqs_facKThrValveReqCorr = 0,4 × KPkrit = 1,4 × 10-5 ergibt. Die kritische Frequenz bzw. Periodendauer ergibt sich nach Abbildung 5.8 aus dem Mittelwert von 10 Schwingungen zu TKrit = 1,61⁄10 sek ≈ 0,16sek. Damit ist Tn = 0,8 × TKrit ≈ 0,13sek. Abbildung 5.11 zeigt die Sprungant- wort des geregelten Systems. In Anhang F wird die Grundparametrierung des Kennfelds T2t_rpmEngSpdpManiReq2facThrValveReqBase_MAP beschrieben. 180 Λ [16]

.Kritische Frequenz der Saugrohrdruckreglerauslegung
image::t2t_png_1.png[]

Durch das Flag T2t_pManiReqOverride kann die Saugrohrdruckanforderung manuell mit T2t_pManiReqMan überschrieben werden, bevor sie als Nachricht weitergereicht wird. Die Auswertung der Funktion T2t_calc erfolgt im Synchron-Raster. Die Berechnung der Abtastzeit der Regler erfolgt, wie in Gleichung 5.10 beschrieben.

.Sprungantwort des Saugrohrdruckreglers
image::t2t_png_2.png[]

*Hint:*

Die Auslegung erfolgt in der Simulation gegen LABCAR. Eventuell muss eine Anpassung am Motor durchgeführt werden. Bei der Auslegung des Saugrohrdruckreglers muss berücksichtigt werden, dass im Modul Drosselklappe (s. auch Abschnitt 5.5.1) eine Positionsregelung der Drosselklappe erfolgt. Es handelt sich um eine Regler-Kaskade, d. h., Änderungen am Regler für die Drosselklappenposition können Auswirkungen auf die Saugrohrdruckregelung haben. Zunächst wird der Motor nur als Saugmotor betrieben, d. h., das Wastegate ist immer voll geöffnet. Weiterhin findet nie ein Vollastbetrieb statt. Es stellt sich kein oder nur ein geringer Ladedruck ein, wodurch der Wastegateregler nie in Betrieb war und die Reglerparameter nicht eingestellt sind.